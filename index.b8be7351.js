function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t=document.querySelectorAll(".field-row"),n=document.querySelector(".game-score"),o=document.querySelector(".button"),a=0,u=i();function i(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}function c(){return Math.floor(4*Math.random())}function f(){var r=c(),e=c();0===u[r][e]?u[r][e]=Math.random()>.9?4:2:f()}function l(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)t[r].children[e].textContent=u[r][e]?u[r][e]:"",t[r].children[e].className="field-cell field-cell--".concat(u[r][e]);n.textContent=a}function s(){window.addEventListener("keydown",d,{once:!0})}function d(r){switch(r.key){case"ArrowUp":!function(){for(var r=h(m(u)),t=u.map(function(r){return e(r)}),n=u.map(function(r){return e(r)}),o=!1,a=0;a<4;a++)for(var i=0;i<4;i++)n[a][i]=r[i][a];for(var c=0;c<t.length;c++){for(var s=0;s<t[c].length;s++)if(t[c][s]!==n[c][s]){u=n,f(),l(),o=!0;break}if(o)break}}();break;case"ArrowDown":!function(){for(var r=h(m(u.map(function(r){return e(r)}).reverse())),t=u.map(function(r){return e(r)}),n=u.map(function(r){return e(r)}),o=!1,a=0;a<4;a++)for(var i=0;i<4;i++)t[a][i]=r[i][a];t.reverse();for(var c=0;c<n.length;c++){for(var s=0;s<n[c].length;s++)if(n[c][s]!==t[c][s]){u=t,f(),l(),o=!0;break}if(o)break}}();break;case"ArrowLeft":!function(){for(var r=h(u),t=u.map(function(r){return e(r)}),n=!1,o=0;o<t.length;o++){for(var a=0;a<t[o].length;a++)if(t[o][a]!==r[o][a]){u=r,f(),l(),n=!0;break}if(n)break}}();break;case"ArrowRight":!function(){for(var r=h(u.map(function(r){return e(r).reverse()})).map(function(r){return e(r).reverse()}),t=u.map(function(r){return e(r)}),n=!1,o=0;o<t.length;o++){for(var a=0;a<t[o].length;a++)if(t[o][a]!==r[o][a]){u=r,f(),l(),n=!0;break}if(n)break}}();break;default:s();return}u.some(function(r){return r.includes(0)})||!1!==function(r){var e=!1;r.forEach(function(r){for(var t=0;t<r.length-1;t++)r[t]===r[t+1]&&(e=!0)});for(var t=!1,n=0;n<r.length;n++)for(var o=0;o<r[n].length-1;o++)r[o][n]===r[o+1][n]&&(t=!0);return e||t}(u)?s():document.querySelector(".message-lose").classList.toggle("hidden"),u.some(function(r){return r.includes(2048)})&&document.querySelector(".message-win").classList.toggle("hidden")}function m(r){for(var e=[],t=0;t<r.length;t++){for(var n=[],o=0;o<r[t].length;o++)n.push(r[o][t]);e.push(n)}return e}function h(r){var e=[];return r.forEach(function(r){for(var t=r.filter(function(r){return 0!==r}),n=!1,o=1;o<t.length;o++)t[o]!==t[o-1]||n||(t[o-1]=t[o]+t[o],t[o]=0,a+=t[o-1],o--,n=!0,t=t.filter(function(r){return 0!==r}));var u=r.length-t.length;r.length!==t.length?e.push(t.concat(Array(u).fill(0))):e.push(t)}),e}o.addEventListener("click",function(){"Start"===o.textContent?(o.textContent="Restart",o.classList.replace("start","restart"),document.querySelector(".message-start").classList.add("hidden")):(document.querySelector(".message-lose").className="message message-lose hidden",document.querySelector(".message-win").className="message message-win hidden",u=i(),a=0,l(),s()),f(),f(),l()}),s();
//# sourceMappingURL=index.b8be7351.js.map
